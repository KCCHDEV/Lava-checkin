<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\Blog;
use App\Models\User;
use Carbon\Carbon;

class BlogSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $admin = User::where('role', 'admin')->first();
        
        if (!$admin) {
            $this->command->warn('No admin user found. Skipping blog seeding.');
            return;
        }

        $blogs = [
            [
                'title' => 'เทคนิคการเรียนออนไลน์ให้มีประสิทธิภาพ',
                'slug' => 'online-learning-tips',
                'content' => '<h2>เทคนิคการเรียนออนไลน์ให้มีประสิทธิภาพ</h2><p>ในยุคที่เทคโนโลยีเข้ามามีบทบาทสำคัญในการศึกษา การเรียนออนไลน์จึงกลายเป็นส่วนหนึ่งของชีวิตนักเรียน</p><h3>1. จัดสภาพแวดล้อมให้เหมาะสม</h3><p>เลือกสถานที่ที่เงียบสงบ มีแสงสว่างเพียงพอ และไม่มีสิ่งรบกวน</p><h3>2. ตั้งเป้าหมายที่ชัดเจน</h3><p>กำหนดเป้าหมายการเรียนในแต่ละวัน และติดตามความคืบหน้า</p><h3>3. ใช้เทคโนโลยีอย่างชาญฉลาด</h3><p>เลือกใช้เครื่องมือและแอปพลิเคชันที่เหมาะสมกับการเรียน</p><p>การเรียนออนไลน์ไม่ใช่เรื่องยาก หากเรามีเทคนิคและวิธีการที่ถูกต้อง</p>',
                'excerpt' => 'เทคนิคและวิธีการเรียนออนไลน์ให้มีประสิทธิภาพในยุคดิจิทัล',
                'category' => 'academic',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(10),
                'author_id' => $admin->id,
                'tags' => ['การเรียนออนไลน์', 'เทคนิคการเรียน', 'การศึกษา'],
                'is_featured' => true,
                'meta_title' => 'เทคนิคการเรียนออนไลน์ให้มีประสิทธิภาพ',
                'meta_description' => 'เรียนรู้เทคนิคการเรียนออนไลน์ให้มีประสิทธิภาพในยุคดิจิทัล',
            ],
            [
                'title' => 'กิจกรรมวันวิทยาศาสตร์ 2567',
                'slug' => 'science-day-2024',
                'content' => '<h2>กิจกรรมวันวิทยาศาสตร์ 2567</h2><p>โรงเรียนจัดกิจกรรมวันวิทยาศาสตร์เพื่อส่งเสริมการเรียนรู้และความสนใจในวิทยาศาสตร์</p><h3>กิจกรรมที่จัดขึ้น</h3><ul><li>การแข่งขันโครงงานวิทยาศาสตร์</li><li>การแสดงผลงานนักเรียน</li><li>การบรรยายพิเศษจากวิทยากร</li><li>การทดลองวิทยาศาสตร์</li></ul><h3>ผลการแข่งขัน</h3><p>นักเรียนให้ความสนใจเข้าร่วมกิจกรรมเป็นจำนวนมาก และมีผลงานที่น่าสนใจมากมาย</p><p>กิจกรรมนี้ช่วยให้นักเรียนได้เรียนรู้วิทยาศาสตร์ผ่านการปฏิบัติจริง</p>',
                'excerpt' => 'รายงานกิจกรรมวันวิทยาศาสตร์ 2567 ที่จัดขึ้นในโรงเรียน',
                'category' => 'events',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(7),
                'author_id' => $admin->id,
                'tags' => ['วันวิทยาศาสตร์', 'กิจกรรม', 'โครงงาน'],
                'is_featured' => false,
                'meta_title' => 'กิจกรรมวันวิทยาศาสตร์ 2567',
                'meta_description' => 'รายงานกิจกรรมวันวิทยาศาสตร์ 2567 ที่จัดขึ้นในโรงเรียน',
            ],
            [
                'title' => 'การพัฒนาทักษะการเขียนโปรแกรม',
                'slug' => 'programming-skills-development',
                'content' => '<h2>การพัฒนาทักษะการเขียนโปรแกรม</h2><p>ในยุคดิจิทัล ทักษะการเขียนโปรแกรมกลายเป็นทักษะที่สำคัญมาก</p><h3>ภาษาที่แนะนำสำหรับผู้เริ่มต้น</h3><ul><li>Python - ง่ายต่อการเรียนรู้</li><li>JavaScript - สำหรับพัฒนาเว็บ</li><li>Scratch - สำหรับเด็ก</li></ul><h3>วิธีการเรียนรู้</h3><p>1. เริ่มจากพื้นฐาน</p><p>2. ฝึกฝนอย่างสม่ำเสมอ</p><p>3. ทำโปรเจกต์จริง</p><p>4. เรียนรู้จากชุมชน</p><h3>ประโยชน์ของการเขียนโปรแกรม</h3><p>- พัฒนาความคิดเชิงตรรกะ</p><p>- เพิ่มโอกาสในการทำงาน</p><p>- สร้างสรรค์นวัตกรรมใหม่</p>',
                'excerpt' => 'แนะนำวิธีการพัฒนาทักษะการเขียนโปรแกรมสำหรับนักเรียน',
                'category' => 'technology',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(5),
                'author_id' => $admin->id,
                'tags' => ['การเขียนโปรแกรม', 'เทคโนโลยี', 'การศึกษา'],
                'is_featured' => true,
                'meta_title' => 'การพัฒนาทักษะการเขียนโปรแกรม',
                'meta_description' => 'แนะนำวิธีการพัฒนาทักษะการเขียนโปรแกรมสำหรับนักเรียน',
            ],
            [
                'title' => 'ชีวิตนักเรียนในยุคใหม่',
                'slug' => 'student-life-modern-era',
                'content' => '<h2>ชีวิตนักเรียนในยุคใหม่</h2><p>ชีวิตนักเรียนในยุคปัจจุบันมีความแตกต่างจากอดีตมาก</p><h3>การเปลี่ยนแปลงที่สำคัญ</h3><p>1. การใช้เทคโนโลยีในการเรียน</p><p>2. การเรียนออนไลน์</p><p>3. การเข้าถึงข้อมูลที่ง่ายขึ้น</p><p>4. การสื่อสารที่รวดเร็ว</p><h3>ความท้าทาย</h3><p>- การจัดการเวลา</p><p>- การใช้เทคโนโลยีอย่างเหมาะสม</p><p>- การรักษาสมดุลชีวิต</p><h3>โอกาสใหม่</h3><p>- การเรียนรู้ที่ไม่มีขีดจำกัด</p><p>- การพัฒนาทักษะใหม่</p><p>- การเชื่อมต่อกับโลก</p>',
                'excerpt' => 'สำรวจชีวิตนักเรียนในยุคดิจิทัลและการเปลี่ยนแปลงที่เกิดขึ้น',
                'category' => 'student-life',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(3),
                'author_id' => $admin->id,
                'tags' => ['ชีวิตนักเรียน', 'ยุคดิจิทัล', 'การศึกษา'],
                'is_featured' => false,
                'meta_title' => 'ชีวิตนักเรียนในยุคใหม่',
                'meta_description' => 'สำรวจชีวิตนักเรียนในยุคดิจิทัลและการเปลี่ยนแปลงที่เกิดขึ้น',
            ],
        ];

        foreach ($blogs as $blog) {
            Blog::updateOrCreate(
                ['slug' => $blog['slug']],
                $blog
            );
        }

        $this->command->info('Blogs seeded successfully!');
    }
}
